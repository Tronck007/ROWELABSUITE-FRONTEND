import{_ as A}from"./AppTextField-a1a28005.js";import{b as C,a as k,d as U,V as j,f as I}from"./TableViews-57cd31e9.js";import{_ as w}from"./AppCombobox-85934e88.js";import{V as o}from"./VCol-7f95da18.js";import{V as c}from"./VRow-4111d537.js";import{a6 as S,r as n,o as B,c as D,b as e,e as l,m as b,d as _,v as F,an as N,aF as R,t as P,F as $}from"./index-7294bbd4.js";import"./VSelectionControl-77cf70c7.js";import"./VInput-ee82279d.js";import"./VImg-58e9b6f4.js";import"./VTextField-b6d8b014.js";import"./forwardRefs-6ea3df5c.js";import"./_commonjsHelpers-de833af9.js";import"./api-dde3c648.js";import"./VTable-65129b7d.js";import"./VCardText-f3dad09d.js";import"./VAvatar-0272051e.js";import"./VCard-b5c127a0.js";import"./VDialog-fa37f33b.js";import"./VOverlay-674fe774.js";import"./VList-76b48cdc.js";import"./VDivider-34c6095b.js";import"./VMenu-81ec18fe.js";import"./VChip-591b382a.js";const L={class:"d-flex align-center"},M={class:"d-flex flex-column ms-3"},O={class:"d-block font-weight-medium title-high-emphasis title-truncate"},H={class:"d-flex justify-end mt-4 mb-6"},fe={__name:"TestAnEquipment",setup(z){const g=C(),y=k(),T=U(),V=S(()=>y.currentProcess),i=n(null),r=n(null),m=n(null),u=n(null),x=n(V.value.samples),d=n([]),h=S(()=>{let p=0;return x.value.map(t=>({id:++p,sampling_id:t.sampling_id,item_id:t.item_id,item_batch_id:t.item_batch_id}))}),E=[{title:"MUESTRAS",key:"sampling_id"},{title:"ARTÍCULOS",key:"item_id"},{title:"LOTES",key:"item_batch_id"}],q=async()=>{const p=V.value.process_code,f=h.value.filter(s=>d.value.includes(s.id)).map(s=>({sampling_id:s.sampling_id})),v={equipment:r.value,test:i.value,hora:parseInt(m.value)||0,minutos:parseInt(u.value)||0,samples:f};try{await T.createTestprocess(p,v),d.value=[],r.value=null,i.value=null,m.value=null,u.value=null}catch(s){console.log("Error:",s)}};return(p,t)=>{const f=w,v=I,s=A;return B(),D($,null,[e(c,{align:"center",justify:"center",dense:""},{default:l(()=>[e(o,{cols:"12",md:"12"},{default:l(()=>[e(f,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=a=>r.value=a),label:"Catalogo de Equipos",items:b(g).catalogEquipment,"item-title":"combined","item-value":"object_id","prepend-inner-icon":"tabler-tools","persistent-hint":"","return-object":"",search:"","single-line":"",placeholder:"Seleccionar las Equipos",clearable:""},null,8,["modelValue","items"])]),_:1}),e(o,{cols:"12",md:"12"},{default:l(()=>[e(v,{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=a=>i.value=a),label:"Catalogo de pruebas",multiple:"",items:b(g).catalogTest,"item-title":"test_desc","item-value":"quality_test_id","prepend-inner-icon":"tabler-test-pipe","persistent-hint":"","return-object":"",search:"","single-line":"",placeholder:"Seleccionar las Pruebas",clearable:""},null,8,["modelValue","items"])]),_:1}),e(o,{cols:"6"},{default:l(()=>[e(s,{modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=a=>m.value=a),label:"Hora",type:"number",placeholder:"00","single-line":""},null,8,["modelValue"])]),_:1}),e(o,{cols:"6"},{default:l(()=>[e(s,{modelValue:u.value,"onUpdate:modelValue":t[3]||(t[3]=a=>u.value=a),label:"Minutos",type:"number",placeholder:"00","single-line":""},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{align:"center",justify:"center",dense:""},{default:l(()=>[e(o,{cols:"12",md:"12"},{default:l(()=>[e(b(j),{modelValue:d.value,"onUpdate:modelValue":t[4]||(t[4]=a=>d.value=a),headers:E,items:h.value,"items-per-page":5,"show-select":""},{"item:":l(({item:a})=>[_("div",L,[_("div",M,[_("span",O,F(a.sampling_id),1)])])]),_:1},8,["modelValue","items"])]),_:1})]),_:1}),e(c,null,{default:l(()=>[e(c,null,{default:l(()=>[e(o,{cols:"12",md:"12"},{default:l(()=>[_("div",H,[e(N,{type:"submit",onClick:q},{default:l(()=>[e(R,{start:"",icon:"tabler-send"}),P(" ENVIAR ")]),_:1})])]),_:1})]),_:1})]),_:1})],64)}}};export{fe as default};
