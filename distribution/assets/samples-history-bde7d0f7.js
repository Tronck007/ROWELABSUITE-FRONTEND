import{V as k}from"./VNodeRenderer-65d298c1.js";import{i as M,r as N,bj as H,a6 as q,o as n,c as d,b as i,e as r,m as c,d as e,H as S,v as p,y as h,f as Z,F as b,h as y,an as L,t as $}from"./index-7294bbd4.js";import{a as j,f as g,V as E}from"./VTable-65129b7d.js";import{V as R}from"./VRow-4111d537.js";import{V as B}from"./VCol-7f95da18.js";import{V as P}from"./VCard-b5c127a0.js";import{V as u}from"./VCardText-f3dad09d.js";import{V as F}from"./VDivider-34c6095b.js";import"./_commonjsHelpers-de833af9.js";import"./VAvatar-0272051e.js";import"./VImg-58e9b6f4.js";const I={key:0,class:"header-to-print"},U={class:"ma-sm-4"},z={class:"d-flex align-center mb-6"},O=e("h6",{class:"font-weight-bold text-capitalize text-h4"}," Laboratorio Rowe ",-1),G={class:"mt-4 ma-sm-4"},J={class:"font-weight-medium text-h4"},K={class:"my-3"},Q=e("span",null,"Fecha: ",-1),W={class:"ma-sm-4"},X=e("h6",{class:"text-base font-weight-medium mb-6"}," Generado Por: ",-1),Y={class:"mb-1"},ee=e("p",{class:"mb-1"}," Control de Calidad ",-1),te=e("thead",null,[e("tr",null,[e("th",null,"Equipos"),e("th",null,"Descripción"),e("th",null,"Uso del equipo")])],-1),ae=e("div",{class:"d-flex mx-sm-4"},[e("h6",{class:"text-base font-weight-medium me-1"}," Note: "),e("span",null,"Este documento es para uso exclusivamente interno y confidencial. No se debe compartir fuera de la organización sin autorización previa.")],-1),se={key:3},qe={__name:"samples-history",setup(ie){M();const T=N({data:[{item_batch_id:"20758",item_id:"35738CH",samples:[{sampling_id:"MUES-A000064348"}],equipments:[{equipment_name:"10007",equipment_desc:"Baño de maría",program_start_equipment_process:"2024-04-17T17:56:48.325Z",program_end_equipment_process:"2024-04-17T18:06:48.325Z",real_end_equipment_process:"2024-04-17T18:07:00.983Z",createdBy:{user_id:464,transaction_id:"c252be4c-5005-472c-aa10-dd05c09135cc",timestamp:"2024-04-17T15:57:16.000Z"},updatedBy:{user_id:464,transaction_id:"c252be4c-5005-472c-aa10-dd05c09135cc",timestamp:"2024-04-17T15:57:16.000Z"},tests:[{quality_test_id:"P_A0141",quality_test_desc:"Bacterias gram negativas tolerantes a la bilis"}]},{equipment_name:"10038",equipment_desc:"Baño de Precisión 28L",program_start_equipment_process:"2024-04-17T18:00:29.653Z",program_end_equipment_process:"2024-04-17T18:05:29.653Z",real_end_equipment_process:"2024-04-17T18:06:00.926Z",createdBy:{user_id:464,transaction_id:"7bc63bb5-d1f4-47e2-9671-8498130d75ba",timestamp:"2024-04-17T15:57:16.000Z"},updatedBy:{user_id:464,transaction_id:"7bc63bb5-d1f4-47e2-9671-8498130d75ba",timestamp:"2024-04-17T15:57:16.000Z"},tests:[{quality_test_id:"P_A0006",quality_test_desc:"Descripción"},{quality_test_id:"P_A2057",quality_test_desc:"Densidad"}]},{equipment_name:"10064",equipment_desc:"Mechero Fireboy Plus",program_start_equipment_process:"2024-04-17T18:01:22.837Z",program_end_equipment_process:"2024-04-17T18:04:22.837Z",real_end_equipment_process:"2024-04-17T18:05:00.864Z",createdBy:{user_id:464,transaction_id:"18c5bef7-a1a2-4339-aa76-59521a09f11b",timestamp:"2024-04-17T15:57:16.000Z"},updatedBy:{user_id:464,transaction_id:"18c5bef7-a1a2-4339-aa76-59521a09f11b",timestamp:"2024-04-17T15:57:16.000Z"},tests:[{quality_test_id:"P_A2066",quality_test_desc:"Burkholderia cepacia"}]},{equipment_name:"10104",equipment_desc:"HPLC #31 Chromaster",program_start_equipment_process:"2024-04-17T18:06:01.077Z",program_end_equipment_process:"2024-04-17T18:18:01.077Z",real_end_equipment_process:"2024-04-17T18:19:00.707Z",createdBy:{user_id:464,transaction_id:"01ab82c8-15c2-4eff-b853-ef7fc9d17757",timestamp:"2024-04-17T15:57:16.000Z"},updatedBy:{user_id:464,transaction_id:"01ab82c8-15c2-4eff-b853-ef7fc9d17757",timestamp:"2024-04-17T15:57:16.000Z"},tests:[{quality_test_id:"P_A1800",quality_test_desc:"pH"}]},{equipment_name:"10383",equipment_desc:"Penetrador  de Supositorios",program_start_equipment_process:"2024-04-17T18:06:01.077Z",program_end_equipment_process:"2024-04-17T18:16:01.077Z",real_end_equipment_process:"2024-04-17T18:17:00.582Z",createdBy:{user_id:464,transaction_id:"d719cc3b-4370-41c1-bd20-12dbe420cef4",timestamp:"2024-04-17T15:57:16.000Z"},updatedBy:{user_id:464,transaction_id:"d719cc3b-4370-41c1-bd20-12dbe420cef4",timestamp:"2024-04-17T15:57:16.000Z"},tests:[{quality_test_id:"P-A2355",quality_test_desc:"Mesófilos aerobios totales"},{quality_test_id:"P_A0615",quality_test_desc:"Salmonella"}]},{equipment_name:"10034",equipment_desc:"Automuestreador ICP",program_start_equipment_process:"2024-04-17T18:06:01.077Z",program_end_equipment_process:"2024-04-17T18:31:01.077Z",real_end_equipment_process:"2024-04-18T11:05:00.964Z",createdBy:{user_id:464,transaction_id:"2e68bae3-a505-436b-bb80-a22573147b95",timestamp:"2024-04-17T15:57:16.000Z"},updatedBy:{user_id:464,transaction_id:"2e68bae3-a505-436b-bb80-a22573147b95",timestamp:"2024-04-17T15:57:16.000Z"},tests:[{quality_test_id:"P_A2057",quality_test_desc:"Densidad"},{quality_test_id:"P_A0006",quality_test_desc:"Descripción"}]}]},{item_batch_id:"20758",item_id:"35738CH",samples:[{sampling_id:"MUES-A000064349"}],equipments:[{equipment_name:"10007",equipment_desc:"Baño de maría",program_start_equipment_process:"2024-04-17T17:56:48.325Z",program_end_equipment_process:"2024-04-17T18:06:48.325Z",real_end_equipment_process:"2024-04-17T18:07:00.983Z",createdBy:{user_id:464,transaction_id:"c252be4c-5005-472c-aa10-dd05c09135cc",timestamp:"2024-04-17T15:57:16.000Z"},updatedBy:{user_id:464,transaction_id:"c252be4c-5005-472c-aa10-dd05c09135cc",timestamp:"2024-04-17T15:57:16.000Z"},tests:[{quality_test_id:"P_A0141",quality_test_desc:"Bacterias gram negativas tolerantes a la bilis"}]},{equipment_name:"10038",equipment_desc:"Baño de Precisión 28L",program_start_equipment_process:"2024-04-17T18:00:29.653Z",program_end_equipment_process:"2024-04-17T18:05:29.653Z",real_end_equipment_process:"2024-04-17T18:06:00.926Z",createdBy:{user_id:464,transaction_id:"7bc63bb5-d1f4-47e2-9671-8498130d75ba",timestamp:"2024-04-17T15:57:16.000Z"},updatedBy:{user_id:464,transaction_id:"7bc63bb5-d1f4-47e2-9671-8498130d75ba",timestamp:"2024-04-17T15:57:16.000Z"},tests:[{quality_test_id:"P_A0006",quality_test_desc:"Descripción"},{quality_test_id:"P_A2057",quality_test_desc:"Densidad"}]},{equipment_name:"10064",equipment_desc:"Mechero Fireboy Plus",program_start_equipment_process:"2024-04-17T18:01:22.837Z",program_end_equipment_process:"2024-04-17T18:04:22.837Z",real_end_equipment_process:"2024-04-17T18:05:00.864Z",createdBy:{user_id:464,transaction_id:"18c5bef7-a1a2-4339-aa76-59521a09f11b",timestamp:"2024-04-17T15:57:16.000Z"},updatedBy:{user_id:464,transaction_id:"18c5bef7-a1a2-4339-aa76-59521a09f11b",timestamp:"2024-04-17T15:57:16.000Z"},tests:[{quality_test_id:"P_A2066",quality_test_desc:"Burkholderia cepacia"}]},{equipment_name:"10104",equipment_desc:"HPLC #31 Chromaster",program_start_equipment_process:"2024-04-17T18:06:01.077Z",program_end_equipment_process:"2024-04-17T18:18:01.077Z",real_end_equipment_process:"2024-04-17T18:19:00.707Z",createdBy:{user_id:464,transaction_id:"01ab82c8-15c2-4eff-b853-ef7fc9d17757",timestamp:"2024-04-17T15:57:16.000Z"},updatedBy:{user_id:464,transaction_id:"01ab82c8-15c2-4eff-b853-ef7fc9d17757",timestamp:"2024-04-17T15:57:16.000Z"},tests:[{quality_test_id:"P_A1800",quality_test_desc:"pH"}]},{equipment_name:"10383",equipment_desc:"Penetrador  de Supositorios",program_start_equipment_process:"2024-04-17T18:06:01.077Z",program_end_equipment_process:"2024-04-17T18:16:01.077Z",real_end_equipment_process:"2024-04-17T18:17:00.582Z",createdBy:{user_id:464,transaction_id:"d719cc3b-4370-41c1-bd20-12dbe420cef4",timestamp:"2024-04-17T15:57:16.000Z"},updatedBy:{user_id:464,transaction_id:"d719cc3b-4370-41c1-bd20-12dbe420cef4",timestamp:"2024-04-17T15:57:16.000Z"},tests:[{quality_test_id:"P-A2355",quality_test_desc:"Mesófilos aerobios totales"},{quality_test_id:"P_A0615",quality_test_desc:"Salmonella"}]},{equipment_name:"10034",equipment_desc:"Automuestreador ICP",program_start_equipment_process:"2024-04-17T18:06:01.077Z",program_end_equipment_process:"2024-04-17T18:31:01.077Z",real_end_equipment_process:"2024-04-18T11:05:00.964Z",createdBy:{user_id:464,transaction_id:"2e68bae3-a505-436b-bb80-a22573147b95",timestamp:"2024-04-17T15:57:16.000Z"},updatedBy:{user_id:464,transaction_id:"2e68bae3-a505-436b-bb80-a22573147b95",timestamp:"2024-04-17T15:57:16.000Z"},tests:[{quality_test_id:"P_A2057",quality_test_desc:"Densidad"},{quality_test_id:"P_A0006",quality_test_desc:"Descripción"}]}]}]}),v=H("userData").value,w=(_,a)=>{const t=new Date(_),s=new Date(a),o=Math.abs(s-t),l=Math.floor(o/(1e3*60*60)),f=Math.floor(o/(1e3*60)%60);return`${l} hora${l!==1?"s":""} ${f} minutos`},D=q(()=>T.value.data[0].item_batch_id),A=q(()=>j()),x=q(()=>{const _=T.value.data.flatMap(a=>a.equipments.flatMap(t=>t.tests.map(s=>({equipo:t.equipment_name,descripcion:t.equipment_desc,prueba:`${s.quality_test_id} -> ${s.quality_test_desc}`,inicio:g(t.program_start_equipment_process),fin:g(t.real_end_equipment_process),tiempo:w(t.program_start_equipment_process,t.real_end_equipment_process)}))));return Object.values(_)}),m=q(()=>{const _=new Map;for(const a of x.value){let t=_.get(a.equipo);t||(t={equipo:a.equipo,descripcion:a.descripcion,horarios:[],tiempo:a.tiempo},_.set(a.equipo,t));let s=t.horarios.find(o=>o.inicio===a.inicio&&o.fin===a.fin);s||(s={inicio:a.inicio,fin:a.fin,pruebas:new Set},t.horarios.push(s)),s.pruebas.add(a.prueba)}return _.forEach(a=>{a.horarios.sort((t,s)=>new Date(t.inicio)-new Date(s.inicio))}),Array.from(_.values()).sort((a,t)=>new Date(a.horarios[0].inicio)-new Date(t.horarios[0].inicio))});function C(_){return _.toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" ")}const V=()=>{m.value.length>0?window.print():alert("No hay datos para imprimir.")};return(_,a)=>(n(),d("section",null,[i(R,null,{default:r(()=>[i(B,{cols:"12",md:"9"},{default:r(()=>[i(P,null,{default:r(()=>[c(m).length>0?(n(),d("div",I,[i(u,{class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row print-row"},{default:r(()=>[e("div",U,[e("div",z,[i(c(k),{nodes:c(S).app.logo,class:"me-3"},null,8,["nodes"]),O])]),e("div",G,[e("h6",J," N.Lote # "+p(c(D)),1),e("p",K,[Q,e("span",null,p(c(A)),1)])])]),_:1})])):h("",!0),i(u,{class:"d-flex justify-space-between flex-wrap flex-column flex-sm-row print-row"},{default:r(()=>[e("div",W,[X,e("strong",null,[e("p",Y,p(C(c(v).full_name)),1)]),ee])]),_:1}),c(m).length>0?(n(),Z(u,{key:1},{default:r(()=>[i(E,{dense:"",class:"invoice-preview-table"},{default:r(()=>[te,e("tbody",null,[(n(!0),d(b,null,y(c(m),(t,s)=>(n(),d("tr",{key:`equipment-${s}`},[e("td",null,p(t.equipo),1),e("td",null,p(t.descripcion),1),e("td",null,[(n(!0),d(b,null,y(t.horarios,(o,l)=>(n(),d(b,{key:`horario-${l}`},[e("div",null,p(o.inicio)+" - "+p(o.fin)+" - Tiempo total: ("+p(t.tiempo)+") ",1),(n(!0),d(b,null,y(o.pruebas,f=>(n(),d("div",{key:f},p(f),1))),128))],64))),128))])]))),128))])]),_:1})]),_:1})):h("",!0),i(F,{class:"mb-2"}),c(m).length>0?(n(),Z(u,{key:2},{default:r(()=>[ae]),_:1})):(n(),d("div",se," No hay información disponible para imprimir. "))]),_:1})]),_:1}),i(B,{cols:"12",md:"3",class:"d-print-none"},{default:r(()=>[i(P,null,{default:r(()=>[i(u,null,{default:r(()=>[i(L,{block:"",variant:"tonal","prepend-icon":"tabler-printer",color:"primary",class:"mb-2",onClick:V},{default:r(()=>[$(" Imprimir ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}};export{qe as default};
